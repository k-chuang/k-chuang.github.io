I"Ò<h2>Introduction</h2>
<p>This is part 2 (and the final part) of the automating the menial tasks mini-series. I will be talking about using Python and Selenium to automate downloading audio files from a free audio database called <a href="https://freesound.org/" target="_blank" rel="noopener">Freesound</a>.</p>
<p>This was an old project that I had worked on when I was first getting into programming in Python. Recently, I revisited the code, since I remember it being such a cool and exciting project. I wanted to make it even better, so I spent some time refactoring the old, messy, and unPythonic code into a more understandable, clean CLI (Command Line Interface) application.</p>
<p>In addition to refactoring the code, I also started writing some unit tests and test cases to test the newly refactored code and the application as a whole. It was my first time writing unit tests and test cases for testing code, and it was such an awesome and fulfilling experience! I learned about a bunch of cool Python test frameworks and libraries (<a href="https://docs.pytest.org/en/latest/" target="_blank" rel="noopener">pytest</a>, <a href="https://pytest-cov.readthedocs.io/en/latest/" target="_blank" rel="noopener">pytest-cov</a>, <a href="https://docs.python.org/2/library/unittest.html" target="_blank" rel="noopener">unittest</a>), an open source, hosted continuous integration service called <a href="http://travis-ci.org" target="_blank" rel="noopener">travis-ci</a>, andÂ a coverage statistic web service that publishes and tracks your code coverage stats online called <a href="http://coveralls.io" target="_blank" rel="noopener">coveralls.io</a>.</p>
<p>Both <strong>travis-ci</strong> and <strong>coveralls.io</strong> sync with GitHub, so every commit to a GitHub repo will trigger a new build, and generate updated code coverage stats. Also, these two servicesÂ  both provide a nice dynamic badge icon that represents the status of your current build (<strong>travis-ci</strong>) or displays the current percentage of code coverage (<strong>coveralls.io</strong>).</p>
<p>The two dynamic and clickable icons that are on my GitHub are located here. Click them if you are interested in seeing the up-to-date details and status of my build on travis-ci and the code coverage stats on coverage.io:</p>
<p><a href="https://travis-ci.org/k-chuang/automate-download-freesound"><img src="/assets/automate-download-freesound.svg?branch=master" alt="Build Status" /></a></p>
<p><a href="https://coveralls.io/github/k-chuang/automate-download-freesound?branch=master"><img src="/assets/badge.svg?branch=master" alt="Coverage Status" /></a></p>
<p>The Python code for this project can be found on my GitHub along with the cool badge icons shown above, courtesy of <strong>travis-ci</strong> and <strong>coveralls.io</strong>:</p>
<p><a href="https://github.com/k-chuang/automate-download-freesound" target="_blank" rel="noopener">Freesound Downloader</a></p>
<h2>Setting Up</h2>
<p>Install chromedriver via brew or from theÂ <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" rel="nofollow">Google site</a>, and set the location of the chromedriver on your SYSTEM PATH.</p>
<p>I installed the chromedriver viaÂ <a href="https://brew.sh/" rel="nofollow">brew</a> (command is below), and naturally, brew installs packages to /usr/local/bin, which is already in the $PATH, so that is pretty convenient. You can always do an echo $PATH to make sure that /usr/local/bin is in it, and if it's not in your $PATH variable, then export it by editing either ~/.bash_profile or /etc/paths/.</p>
<pre><code>$ brew install chromedriver
</code></pre>
<p>After installing the chromedriver, here is rest of the setup:</p>
<pre><code>$ git clone https://github.com/k-chuang/automate-download-freesound.git
$ cd automate-download-freesound
$ virtualenv -p /usr/bin/python2.7 venv
$ source venv/bin/activate
$ pip install -r dev-requirements.txt
$ pytest</code></pre>
<p>Also, you will need to create a free account on <a href="http://freesound.org" target="_blank" rel="noopener">Freesound</a> in order to download files.</p>
<h2>How to Use</h2>
<p>Run the command below for more information regarding the arguments (positional or optional, default values, description, etc.)</p>
<pre><code>$ python automate_download_freesound.py --help
</code></pre>
<p>There is one required argument, and that is the desired sounds you wish to download fromÂ <a href="http://freesound.org/" rel="nofollow">Freesound</a>. You may list more than one sound, but make sure to separate each one by commas, and if the sound you want to download includes spaces, please put quotation marks around it to ensure a smooth experience. Also, make sure it is the first argument after the script. Example:</p>
<pre><code>$ python automate_download_freesound.py "dogs barking,cats purring"
</code></pre>
<p>There are more features and arguments, including download path, file format, sample rate, and advanced filtering. These are all optional arguments, and can help with filtering for your specific needs.</p>
<p>Here is another example, where all the optional arguments are specified:</p>
<pre><code>$ python automate_download_freesound.py "baby crying,smoke alarm" --download-dir /Users/KevinChuang/Desktop --file-format wav --sample-rate 48000 --advanced-filter True
</code></pre>
<p>This command will download 'baby crying' and 'smoke alarm' wav files with a sampling rate of 48000 from <a href="http://freesound.org">Freesound.org</a>.</p>
<p>Here are brief descriptions of each of the arguments, and some sample parameters:</p>
<table style="table-layout:fixed;width:867px;">
<colgroup>
<col style="width:203px;" />
<col style="width:100px;" />
<col style="width:564px;" /> </colgroup>
<tbody>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr>
<td>sound</td>
<td>required</td>
<td>a list of sounds (or just one sound) separated by commas (if multiple), and enclosed in parenthesis</td>
</tr>
<tr>
<td>â€“â€“download-dir</td>
<td>optional</td>
<td>a string literal with a path to the download folder you wish to download files to. The default value for this argument is your respective 'Downloads' folder. This works for both MacOS and Windows environment.</td>
</tr>
<tr>
<td>â€“â€“file-format</td>
<td>optional</td>
<td>a string literal with the desired audio file format extension of the downloaded files. Default will be all available audio file formats with no filtering. Choices include wav, ogg, mp3, m4a, aiff, and flac.</td>
</tr>
<tr>
<td>â€“â€“sample-rate</td>
<td>optional</td>
<td>a integer with the desired sample rate of the downloaded files. Default will be all available sample rates with no filtering. Choices include 11025, 16000, 22050, 44100, 48000, 88200, and 96000.</td>
</tr>
<tr>
<td>â€“â€“advanced-filter</td>
<td>optional</td>
<td>a boolean value (True or False) that initiates advanced filtering to limit audio files based on search query. The advanced filter will limit the audio files based on the search query found in tags, filenames, and file descriptions.</td>
</tr>
</tbody>
</table>
<h2>Conclusion</h2>
<p>Thus concludes the "Automate the Menial Tasks" mini series. I had a lot of fun working on this old project, and I learned a lot from refactoring it, like how to write sophisticated and complete tests for Python applications. I want to give one last shout out to the two open source and easy to use services that I used in this project:Â <a href="http://travis-ci.org" target="_blank" rel="noopener">travis-ci</a> &amp; <a href="http://coveralls.io" target="_blank" rel="noopener">coveralls.io</a>. I highly recommend checking those two services out.</p>
<p>Again, you can check out my GitHub repo of this project here: <a href="https://github.com/k-chuang/automate-download-freesound" target="_blank" rel="noopener">Freesound Downloader</a></p>
:ET